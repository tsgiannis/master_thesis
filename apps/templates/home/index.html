{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}
{% block content %}

<div class="content">
    {% if selected_option %}
        <div class="alert alert-success" role="alert">
            {{ selected_option }}
        </div>
    {% endif %}
    <div class="card">
        <div class="card-header text-center py-4">
            <h3 class="title">
                Datasets
            </h3>
            <table class="table">
                <thead>
                <tr>
                    {% for key in datasets[0]%}
                    <th>{{ key }}</th>
                    {% endfor %}
                </tr>


                </thead>
                <tbody>
                {% for item in datasets %}
                <tr>
                    {% for key in item%}
                    {% if 'link' in key %}
                    <td><a href={{ item[key] }} target="_blank">{{ item[key] }}</a></td>
                    {% else %}
                    <td>{{ item[key] }}</td>
                    {% endif %}

                    {% endfor %}
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="card-body">
            <form id = "form_datasets" method="POST" action="{{ url_for('home_blueprint.routename') }}">
                <div class="form-row">

                    <div class="form-row col-md-6">
                        <div class="dropdown-toggle">
                            <button class="btn btn-secondary dropdown-toggle" type="submit" id="btnDatasets"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span id="dropdown_title"> Selection of Dataset</span>
                            </button>
                            <div name = 'datasets' class="dropdown-menu" aria-labelledby="Selection of Dataset">
                                {% for item in datasets %}
                                <a class="dropdown-item" onclick="showGenre(this)" data-value = "{{item['name']}}" href="#">{{ item['name'] }}</a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
 <button type="submit" class="btn btn-primary">Submit</button>
            </form>

        </div>
    </div>


    <div class="card">
        <div class="card-header text-center py-4">
            <h3 class="title">
                Language Models
            </h3>
            <table class="table">
                <thead>
                <tr>
                    {% for key in language_models[0]%}
                    <th>{{ key }}</th>
                    {% endfor %}
                </tr>


                </thead>
                <tbody>
                {% for item in language_models %}
                <tr>
                    {% for key in item%}
                    {% if 'link' in key %}
                    <td><a href={{ item[key] }} target="_blank">{{ item[key] }}</a></td>
                    {% else %}
                    <td>{{ item[key] }}</td>
                    {% endif %}

                    {% endfor %}
                </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>
        <div class="card-body">
            <form>
                <div class="form-row">

                    <div class="form-row col-md-6">
                        <div class="dropdown-toggle">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="inputState_language"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span id="dropdown_title_language">Selection of Language Models</span>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="Selection of Language Models">
                                {% for item in language_models %}
                                <a class="dropdown-item" onclick="showGenre(this)" href="#">{{ item['name'] }}</a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

            </form>

        </div>
    </div>
    <div class="card">
        <div class="card-header text-center py-4">
            <h3 class="title">
                Deep Learning Classifiers
            </h3>
            <table class="table">
                <thead>
                <tr>
                    {% for key in deep_learning[0]%}
                    <th>{{ key }}</th>
                    {% endfor %}
                </tr>


                </thead>
                <tbody>
                {% for item in deep_learning %}
                <tr>
                    {% for key in item%}
                    {% if 'link' in key %}
                    <td><a href={{ item[key] }} target="_blank">{{ item[key] }}</a></td>
                    {% else %}
                    <td>{{ item[key] }}</td>
                    {% endif %}

                    {% endfor %}
                </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>
        <div class="card-body">
            <form>
                <div class="form-row">

                    <div class="form-row col-md-6">
                        <div class="dropdown-toggle">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="inputState_deeplearning"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span id="dropdown_title_deeplearning">Selection of Deep Learning Classifier</span>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="Selection of Language Models">
                                {% for item in deep_learning %}
                                <a class="dropdown-item" onclick="showGenre(this)" href="#">{{ item['name'] }}</a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

            </form>

        </div>
    </div>

</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script>
var myCollection = [
    { key1: 'value1' },
    { key2: 'value2' },
    { key3: 'value3' }
];
function addToCollection(collection, key, value) {
    // Check if the key already exists in the collection
    for (var i = 0; i < collection.length; i++) {
        var pair = collection[i];
        if (key in pair) {
            // Update the existing value for the key
            pair[key] = value;
            return;  // Exit the function after updating
        }
    }

    // If the key doesn't exist, add a new key-value pair
    if (collection.length < 3) {
        var newPair = {};
        newPair[key] = value;
        collection.push(newPair);
    } else {
        console.log('Collection already has 3 pairs. Cannot add more.');
    }
    //var jsonString = JSON.stringify(myCollection, null, 0);
console.log(jsonString);
}

// Function to add a new key-value pair to the collection
// Example usage
//addToCollection(myCollection, 'key4', 'value4'); // Will not be added due to the limit
    $('.dropdown-item').on('click', function () {
            var selectedValuex = $(this).data('value');
            $('#form_datasets').append('<input type="hidden" name="selected_option" value="' + selectedValuex + '">');
        });
    function showGenre(item) {
        console.log(item.innerHTML,'111')
        var selectedValue = item.innerHTML;
        console.log(selectedValue+'!')
  document.getElementById("dropdown_title").innerHTML = item.innerHTML;
  var hiddenInput = document.createElement('input');
                hiddenInput.setAttribute('type', 'hidden');
                hiddenInput.setAttribute('name', 'selected_option');
                hiddenInput.setAttribute('value', selectedValue);
                hiddenInput.setAttribute('input_type', 'search');
                document.getElementById('form_datasets').appendChild(hiddenInput);
}
// Iterate over all forms on the page
// document.querySelectorAll('form').forEach(function(form) {
//     // Iterate over all dropdown-items within the form
//     form.querySelectorAll('.dropdown-item.active').forEach(function(item) {
//         // Access the value of each active dropdown-item
//         var value = item.getAttribute('data-value');
//         console.log('Form:', form, 'Dropdown Item Value:', value);
//         // Do something with the value, such as adding it to an array or processing it further
//     });
// });

</script>

{% endblock javascripts %}
